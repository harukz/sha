やること
- テストのきょうどの縮小版の実行
- CPUサイズの増加
- クエリの方法を理解
  - influx bucket list
  - influx query --raw 'from(bucket:"tochigi") |> range(start:-12h)'
- CPU使用率の計算 Cadvisor
- start script作る
- テスト工程を測る

#! /bin/bash
set -eux


レスポンスタイム(平均, 最大)
スループット(平均, 最大)
CPUやメモリ等のコンピューティングリソースの使用率(平均, 最大)
ディスク容量等のコンピューティングリソースの消費量
エラーの発生頻度
その他 (ガベージコレクションの発生頻度等)
目標値の設定例です。


難しそうなのが多変数関数の時。
- アニーリング？
- 本質はよく使われること
- つまり、あらかじめ分類できる想定
  - 適したアルゴリズムの評価などを行う
- 難しいところはシステムによって少し変わりそうな点
- あとistioなどのトラフィック管理のソフトウェア使うと難しくなりそう


オブザーバビリティ
- オブザーバビリティとは、システムの外部から観測できる情報に基づいて、内部の状態を推論し理解する能力のことを指します。
- シグナルの優先順位はどのように決める？というかそもそもそのようなものはなくて、障害発生時や見たいときに決める？
  - log, trace, metricは
- 障害時にアプリ、istio、k8s、OS、物理インフラで障害原因を切り分ける方法
- Sidecarを使わないService Meshの新しい形態が出てきた。
  - 負荷の少ないL4(tcp/udp)までの処理(+mTLS)はホスト単位に配置したエージェントで処理し、重たいL7(http, etc.)の処理は単体でデプロイしたEnvoy(waypoint proxy)で処理するという形態





Service Meshのアイデア
各サービスは通信で連携している
- サービスの前段に配置したプロキシ(Sidecar Proxy)で、サービス間通信を制御し、運用機能を適用
- 多量に出てくるプロキシはコントロールプレーンで一元的に管理
各サービスの前段に配置したプロキシをコントロールプレーンで制御するネットワークモデル
eBPF

聞きたかった理由
- 運用の質を高めていくうえで重要
- オブザーバビリティなどの分野における研究のイメージがつかない？
  - 評価が難しいのでは

ちゃんと理解するには経験するしかない？

- オブザーバビリティとは、システムの外部から観測できる情報に基づいて、内部の状態を推論し理解する能力のことを指します。
  - システムが出力したデータを活用し、システム内部で何が·何故起きているか理解できる状態
  - 対象システムへの任意の質問に手持ちのデータや知識でどれだけ答えられるか
  - Observabilityの実現手段が監視やテスト。システムの内部状態を明らかにする
- シグナルの優先順位はどのように決める？というかそもそもそのようなものはなくて、障害発生時や見たいときに決める？
  - log, trace, metricは
- 障害時にアプリ、istio、k8s、OS、物理インフラで障害原因を切り分ける方法
- Sidecarを使わないService Meshの新しい形態が出てきた。
  - 負荷の少ないL4(tcp/udp)までの処理(+mTLS)はホスト単位に配置したエージェントで処理し、重たいL7(http, etc.)の処理は単体でデプロイしたEnvoy(waypoint proxy)で処理するという形態


オブザーバビリティというか、というか、そもそも方法論に関するものは研究が難しいのでは




- CPU使用率が80%となる最大のユーザ件数
- リクエストの80%のレスポンスタイムが8ms以下に収まる最大のユーザ件数

システムリソース使用率
1. CPUコアごとの使用率が均等になるかの検証  
2. メモリキャッシュヒット率が70%以上を維持できる条件  
3. ディスクI/Oレイテンシが10ms以下を維持できる負荷条件  
レスポンスタイム
4. 特定のAPIエンドポイントの99%のレスポンスタイムが5ms以下を維持できる負荷条件  
5. 同時リクエスト数に応じたレスポンスタイムの増加率  
データ量
6. データベースのレコード件数が1億件を超えた場合のクエリ性能  
7. 1リクエストあたりの平均データ量が2MBを超えた場合の処理性能  
エラーハンドリング
8. 10%のリクエストがタイムアウトした場合のシステムの安定性  
9. APIリクエストに異常データが含まれる場合のエラー処理速度  
スループット（Throughput）
10. 1分間に処理可能な最大トランザクション数  
11. スループットが80%を超える条件でのリクエスト成功率  
同時接続数
12. 同時接続数が増加した場合の接続ハンドリング性能  
13. 同時接続数に比例するリソース消費量  
ネットワーク条件
14. ネットワーク遅延が200msの場合のレスポンスタイム  
15. パケットロス率が5%の場合のシステム安定性  
運用関連
16. システムの自動スケーリングが開始される条件  
17. ログ出力量が増加した場合のI/O性能  
セキュリティと認証
18. 毎秒100件のログイン試行がある場合の認証システム負荷  
19. 複数の同時認証要求が成功・失敗する際の処理速度  
障害発生時
20. 1台のサーバーがダウンしたときの復旧時間  
21. 外部依存サービスが停止した場合のシステム挙動  
その他
22. システムの最大アップタイムが達成できる条件  
23. 定期メンテナンス後の平均起動時間  
24. バックアップ処理中のシステム性能への影響  
25. 同時に複数のバッチ処理が実行された場合の処理性能  





